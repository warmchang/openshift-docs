:_mod-docs-content-type: ASSEMBLY
[id="rosa-hcp-sts-creating-a-cluster-quickly"]
= Creating {product-title} clusters using the default options
include::_attributes/attributes-openshift-dedicated.adoc[]
:context: rosa-hcp-sts-creating-a-cluster-quickly

toc::[]

[role="_abstract"]
{product-title} that use {hcp} offer a more efficient and reliable architecture for creating {product-title} clusters. With {hcp}, each cluster has a dedicated control plane that is isolated in the AWS account.

Create a {product-title} cluster quickly by using the default options and automatic AWS Identity and Access Management (IAM) resource creation. You can deploy your cluster by using the ROSA CLI (`rosa`).

[IMPORTANT]
====
Since it is not possible to upgrade or convert existing {rosa-classic-title} clusters to hosted control plane architecture, you must create a new cluster to use {product-title} functionality.
====

[NOTE]
====
{product-title} clusters only support AWS IAM Security Token Service (STS) authentication.
====

[role="_additional-resources"]
.Additional resources
* link:https://docs.aws.amazon.com/rosa/latest/userguide/getting-started-hcp.html[Getting started with {product-title} using the ROSA CLI in auto mode (AWS documentation)]
* xref:../rosa_architecture/rosa_policy_service_definition/rosa-policy-process-security.adoc#rosa-policy-compliance_rosa-policy-process-security[Full list of the supported certificates]

[id="hcp-considerations_{context}"]
== Considerations regarding auto creation mode

The procedures in this document use the `auto` mode in the ROSA CLI to immediately create the required IAM resources using the current AWS account. The required resources include the account-wide IAM roles and policies, cluster-specific Operator roles and policies, and OpenID Connect (OIDC) identity provider.

Alternatively, you can use `manual` mode, which outputs the `aws` commands needed to create the IAM resources instead of deploying them automatically.

[id="next-steps-hcp_{context}"]
== Next steps

* Ensure that you have completed the xref:../rosa_planning/rosa-sts-aws-prereqs.adoc#rosa-sts-aws-prereqs[AWS prerequisites].

include::modules/rosa-sts-overview-of-the-default-cluster-specifications.adoc[leveloffset=+1]

//TODO OSDOCS-11789: Move these out of the deployment doc and into the prepare doc? Keep in both locations?
include::modules/rosa-hcp-prerequisites.adoc[leveloffset=+1]

include::modules/rosa-hcp-sts-creating-vpc.adoc[leveloffset=+2]

include::modules/rosa-hcp-create-network.adoc[leveloffset=+3]

[role="_additional-resources"]
.Additional resources

* link:https://aws.amazon.com/cloudformation/[AWS CloudFormation documentation]
* link:https://github.com/openshift/rosa/blob/master/cmd/create/network/templates/rosa-quickstart-default-vpc/cloudformation.yaml[Default VPC AWS CloudFormation template]

include::modules/rosa-hcp-vpc-terraform.adoc[leveloffset=+3]

[role="_additional-resources"]
.Additional resources

* link:https://github.com/openshift-cs/terraform-vpc-example[Terraform VPC repository]

include::modules/rosa-hcp-vpc-manual.adoc[leveloffset=+2]

include::modules/vpc-troubleshooting.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources

* xref:../support/troubleshooting/rosa-troubleshooting-installations-hcp.adoc#rosa-troubleshooting-installations-hcp[Troubleshooting {product-title} cluster installations]
* xref:../support/getting-support.adoc#getting-support[Getting support for {product-title}]

include::modules/rosa-hcp-vpc-subnet-tagging.adoc[leveloffset=+3]

[role="_additional-resources"]
.Additional resources

* link:https://docs.aws.amazon.com/vpc/latest/userguide/vpc-getting-started.html[Get Started with Amazon VPC]
* link:https://developer.hashicorp.com/terraform[HashiCorp Terraform documentation]
* link:https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.2/deploy/subnet_discovery/[Subnet Auto Discovery]

include::modules/rosa-hcp-creating-account-wide-sts-roles-and-policies.adoc[leveloffset=+2]

include::modules/rosa-sts-byo-oidc.adoc[leveloffset=+2]

include::modules/rosa-operator-config.adoc[leveloffset=+2]

[role="_additional-resources"]
.Additional resources

* xref:../rosa_architecture/rosa-sts-about-iam-resources.adoc#rosa-sts-about-operator-role-prefixes_rosa-sts-about-iam-resources[About custom Operator IAM role prefixes]

include::modules/rosa-hcp-sts-creating-a-cluster-cli.adoc[leveloffset=+1]

[role="_additional-resources"]
[id="additional-resources_rosa-sts-creating-a-cluster-quickly"]
== Additional resources

* xref:../rosa_architecture/rosa-sts-about-iam-resources.adoc#rosa-sts-about-iam-resources[About IAM resources for clusters that use STS]
* xref:../rosa_architecture/rosa-sts-about-iam-resources.adoc#rosa-sts-about-operator-role-prefixes_rosa-sts-about-iam-resources[About custom Operator IAM role prefixes]
* xref:../rosa_planning/rosa-sts-aws-prereqs.adoc#rosa-hcp-aws-prereqs[AWS prerequisites for ROSA with STS]
* link:https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_oidc.html[Creating OpenID Connect (OIDC) identity providers]
* xref:../support/troubleshooting/rosa-troubleshooting-installations-hcp.adoc#rosa-troubleshooting-installations-hcp[Troubleshooting {product-title} installations]
* xref:../support/getting-support.adoc#getting-support[Getting support for Red{nbsp}Hat OpenShift Service on AWS]