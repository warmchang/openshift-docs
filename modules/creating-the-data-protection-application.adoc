:_mod-docs-content-type: PROCEDURE

//included in backing-up-3scale-api-management-by-using-oadp.adoc assembly

[id="creating-the-data-protection-application_{context}"]
= Creating the Data Protection Application

[role="_abstract"]
Create a Data Protection Application (DPA) custom resource (CR) to configure backup storage and Velero settings for Red{nbsp}Hat 3scale API Management. This helps you set up the backup infrastructure required for protecting your 3scale components.

.Procedure

. Create a YAML file with the following configuration:
+
[source,yaml]
----
apiVersion: oadp.openshift.io/v1alpha1
kind: DataProtectionApplication
metadata:
  name: dpa-sample
  namespace: openshift-adp 
spec:
  configuration:
    velero:
      defaultPlugins:
        - openshift 
        - aws
        - csi
      resourceTimeout: 10m 
    nodeAgent: 
      enable: true 
      uploaderType: kopia 
  backupLocations:
    - name: default
      velero:
        provider: aws
        default: true
        objectStorage:
          bucket: <bucket_name>
          prefix: <prefix>
        config:
          region: <region>
          profile: "default"
          s3ForcePathStyle: "true"
          s3Url: <s3_url>
        credential:
          key: cloud
          name: cloud-credentials
----
+
where:
+
`<bucket_name>`:: Specifies a bucket as the backup storage location. If the bucket is not a dedicated bucket for Velero backups, you must specify a prefix.
`<prefix>`:: Specifies a prefix for Velero backups, for example, `velero`, if the bucket is used for multiple purposes.
`<region>`:: Specifies a region for backup storage location.
`<s3_url>`:: Specifies the URL of the object store that you are using to store backups. 

. Create the DPA CR by running the following command:
+
[source,terminal]
----
$ oc create -f dpa.yaml
----