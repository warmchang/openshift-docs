// Module included in the following assemblies:
//
// * security/security_profiles_operator/spo-logging.adoc

:_mod-docs-content-type: PROCEDURE
[id="spo-log-enabling_{context}"]
= Enabling Advanced Audit Logging

[role="_abstract"]
To enable Advanced Audit Logging, configure the Audit JSON log enricher and specify a set of filters to only log user activity.

.Procedure
. Enable the JSON enricher by running the following command:
+
[source,terminal]
----
# kubectl -n openshift-security-profiles patch spod spod --type=merge -p '{"spec":{"enableJsonEnricher":true}}'
----
Monitor the SPOD pods for correct restart and wait for all SPOD pods to show `Running` before proceeding.
+
. Check the pods for application of the change with the following command:
+
[source,terminal]
----
$ oc get pods -n openshift-security-profiles -l name=spod -w
----
Wait until all SPOD pods show `Running` before proceeding.
+
[NOTE]
====
Each configuration change triggers a restart of the SPOD pods. After applying a patch, wait for all SPOD pods to return to the `Running` state before continuing.
====
+
The Audit JSON log enricher uses eBPF as a supplemental data source. While processing `auditd` logs from `/var/log/audit/audit.log`, the enricher attempts to fetch ephemeral data from `/proc/<pid>` directories. Due to a race condition, these files might be deleted before they can be read. To ensure data completeness, the enricher falls back to fetching the necessary information from eBPF whenever it is not found in `/proc/<pid>`.
