// Module included in the following assemblies:
//
// * scalability_and_performance/cnf-low-latency-tuning.adoc
// * scalability_and_performance/low_latency_tuning/cnf-tuning-low-latency-nodes-with-perf-profile.adoc

:_mod-docs-content-type: PROCEDURE
[id="restricting-cnf-cpu-infra-container_{context}"]
= Restricting CPUs for infra and application containers

[role="_abstract"]
To ensure optimal cluster stability and performance, restrict CPUs for infrastructure and application containers. This configuration isolates workloads to specific CPU sets, preventing resource contention between critical system components and user applications.

.Procedure

. Create a performance profile appropriate for the environment's hardware and topology. The following example adds the `reserved` and `isolated` parameters with the CPUs you want reserved and isolated for the infra and application containers:
+
[source,yaml]
----
apiVersion: performance.openshift.io/v2
kind: PerformanceProfile
metadata:
  name: infra-cpus
spec:
  cpu:
    reserved: "0-4,9"
    isolated: "5-8"
  nodeSelector:
    node-role.kubernetes.io/worker: ""
# ...
----
+
where:

`spec.cpu.reserved`:: Specifies which CPUs are for infra containers to perform cluster and operating system housekeeping duties.

`spec.cpu.isolated`:: Specifies which CPUs are for application containers to run workloads.

`spec.nodeSelector`:: Specifies a node selector to apply the performance profile to specific nodes. Optional parameter.
