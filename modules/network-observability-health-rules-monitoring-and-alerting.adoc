// Module included in the following assemblies:
//
// * network_observability/network-observability-health-rules.adoc

:_mod-docs-content-type: CONCEPT
[id="network-observability-health-rules-monitoring-and-alerting_{context}"]
= Network health monitoring and alerting rules

[role="_abstract"]
The Network Observability Operator includes a rule-based system to detect network anomalies and infrastructure failures. By converting configurations into alerting rules, the Operator enables automated monitoring and troubleshooting through the {product-title} web console.

[id="network-observability-health-outcomes_{context}"]
== Monitoring outcomes
The Network Observability Operator surfaces network status in the following areas:

*Alerting* UI:: Specific alerts appear in *Observe* → *Alerting*, where notifications are managed through the Prometheus `AlertManager`.
*Network Health* dashboard:: A specialized dashboard in *Observe* → *Network Health* provides a high-level summary of cluster network status.

The *Network Health* dashboard categorizes violations into tabs to isolate the scope of an issue:

* *Global*: Aggregate health of the entire cluster.
* *Nodes*: Violations specific to infrastructure nodes.
* *Namespaces*: Violations specific to individual namespaces.
* *Workloads*: Violations specific to resources, such as `Deployments` or `DaemonSets`.

[id="network-observability-default-rules_{context}"]
== Predefined health rules
The Network Observability Operator provides default rules for common networking scenarios. These rules are active only if the corresponding feature is enabled in the `FlowCollector` custom resource (CR).

The following list contains a subset of available default rules:

`PacketDropsByDevice`:: Triggers on a high percentage of packet drops from network devices. It is based on standard node-exporter metrics and does not require the `PacketDrop` agent feature.
`PacketDropsByKernel`:: Triggers on a high percentage of packet drops by the kernel. Requires the `PacketDrop` agent feature.
`IPsecErrors`:: Triggers when IPsec encryption errors are detected. Requires the `IPSec` agent feature.
`NetpolDenied`:: Triggers when traffic denied by network policies is detected. Requires the `NetworkEvents` agent feature.
`LatencyHighTrend`:: Triggers when a significant increase in TCP latency is detected. Requires the `FlowRTT` agent feature.
`DNSErrors`:: Triggers when DNS errors are detected. Requires the `DNSTracking` agent feature.

Operational alerts for the Network Observability Operator:

`NetObservNoFlows`:: Triggers when the pipeline is active but no flows are observed.
`NetObservLokiError`:: Triggers when flows are dropped because of Loki errors.

For a complete list of rules and runbooks, see the link:https://github.com/openshift/runbooks/tree/master/alerts/network-observability-operator[Network Observability Operator runbooks].

[id="network-observability-rule-dependencies_{context}"]
== Rule dependencies and feature requirements
The Network Observability Operator creates rules based on the features enabled in the `FlowCollector` custom resource (CR).

For example, packet drop-related rules are created only if the `PacketDrop` agent feature is enabled. Rules are built on metrics; if the required metrics are missing, configuration warnings might appear. Configure metrics in the `spec.processor.metrics.includeList` object of the `FlowCollector` resource.